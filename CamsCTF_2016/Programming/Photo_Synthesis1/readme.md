All three of these photosynthesis problems had very similar solutions. What I ended up doing was generating factoring the number of pixels and generating every possible set of dimensions, then going through the hundred or so pictures and finding the right one. This was not elegant, but was quick and worked.

{C6H12O6}